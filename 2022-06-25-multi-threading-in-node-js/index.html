<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.230dc4aabe8166815701.css" data-identity="gatsby-global-css">/*! normalize.css v8.0.1 | MIT License | github.com/necolas/normalize.css */html{-webkit-text-size-adjust:100%;line-height:1.15}body{margin:0}main{display:block}h1{font-size:2em;margin:.67em 0}hr{box-sizing:content-box;height:0;overflow:visible}pre{font-family:monospace,monospace;font-size:1em}a{background-color:transparent}abbr[title]{border-bottom:none;text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted}b,strong{font-weight:bolder}code,kbd,samp{font-family:monospace,monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button,input{overflow:visible}button,select{text-transform:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{padding:.35em .75em .625em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}progress{vertical-align:baseline}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}details{display:block}summary{display:list-item}[hidden]{display:none}:root{--maxWidth-none:"none";--maxWidth-xs:20rem;--maxWidth-sm:24rem;--maxWidth-md:28rem;--maxWidth-lg:32rem;--maxWidth-xl:36rem;--maxWidth-2xl:42rem;--maxWidth-3xl:48rem;--maxWidth-4xl:56rem;--maxWidth-full:"100%";--maxWidth-wrapper:var(--maxWidth-2xl);--spacing-px:"1px";--spacing-0:0;--spacing-1:0.25rem;--spacing-2:0.5rem;--spacing-3:0.75rem;--spacing-4:1rem;--spacing-5:1.25rem;--spacing-6:1.5rem;--spacing-8:2rem;--spacing-10:2.5rem;--spacing-12:3rem;--spacing-16:4rem;--spacing-20:5rem;--spacing-24:6rem;--spacing-32:8rem;--fontFamily-sans:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";--fontFamily-serif:system-ui,"Merriweather","Georgia",Cambria,"Times New Roman",Times,serif;--font-body:var(--fontFamily-serif);--font-heading:var(--fontFamily-sans);--fontWeight-normal:400;--fontWeight-medium:500;--fontWeight-semibold:600;--fontWeight-bold:700;--fontWeight-extrabold:800;--fontWeight-black:900;--fontSize-root:16px;--lineHeight-none:1;--lineHeight-tight:1.1;--lineHeight-normal:1.5;--lineHeight-relaxed:1.625;--fontSize-0:0.833rem;--fontSize-1:1rem;--fontSize-2:1.2rem;--fontSize-3:1.44rem;--fontSize-4:1.728rem;--fontSize-5:2.074rem;--fontSize-6:2.488rem;--fontSize-7:2.986rem;--color-primary:#005b99;--color-text:#2e353f;--color-text-light:#4f5969;--color-heading:#1a202c;--color-heading-black:#000;--color-accent:#d1dce5}*,:after,:before{box-sizing:border-box}html{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-size:var(--fontSize-root);line-height:var(--lineHeight-normal)}body{color:var(--color-text);font-family:var(--font-body);font-size:var(--fontSize-1)}footer{padding:var(--spacing-6) var(--spacing-0)}hr{background:var(--color-accent);border:0;height:1px}h1,h2,h3,h4,h5,h6{font-family:var(--font-heading);letter-spacing:-.025em;line-height:var(--lineHeight-tight);margin-bottom:var(--spacing-6);margin-top:var(--spacing-12)}h2,h3,h4,h5,h6{color:var(--color-heading);font-weight:var(--fontWeight-bold)}h1{color:var(--color-heading-black);font-size:var(--fontSize-6);font-weight:var(--fontWeight-black)}h2{font-size:var(--fontSize-5)}h3{font-size:var(--fontSize-4)}h4{font-size:var(--fontSize-3)}h5{font-size:var(--fontSize-2)}h6{font-size:var(--fontSize-1)}h1>a,h2>a,h3>a,h4>a,h5>a,h6>a{color:inherit;text-decoration:none}p{--baseline-multiplier:0.179;--x-height-multiplier:0.35;line-height:var(--lineHeight-relaxed);margin:var(--spacing-0) var(--spacing-0) var(--spacing-8) var(--spacing-0)}ol,p,ul{padding:var(--spacing-0)}ol,ul{list-style-image:none;list-style-position:outside;margin-bottom:var(--spacing-8);margin-left:var(--spacing-8);margin-right:var(--spacing-0)}ol li,ul li{padding-left:var(--spacing-0)}li>p,ol li,ul li{margin-bottom:calc(var(--spacing-8)/2)}li :last-child{margin-bottom:var(--spacing-0)}li>ul{margin-left:var(--spacing-8);margin-top:calc(var(--spacing-8)/2)}blockquote{border-left:var(--spacing-1) solid var(--color-primary);color:var(--color-text-light);font-size:var(--fontSize-2);font-style:italic;margin-bottom:var(--spacing-8);margin-left:calc(var(--spacing-6)*-1);margin-right:var(--spacing-8);padding:var(--spacing-0) var(--spacing-0) var(--spacing-0) var(--spacing-6)}blockquote>:last-child{margin-bottom:var(--spacing-0)}blockquote>ol,blockquote>ul{list-style-position:inside}table{border-collapse:collapse;border-spacing:.25rem;margin-bottom:var(--spacing-8);width:100%}table thead tr th{border-bottom:1px solid var(--color-accent)}a{color:var(--color-primary)}a:focus,a:hover{text-decoration:none}.global-wrapper{margin:var(--spacing-0) auto;max-width:var(--maxWidth-wrapper);padding:var(--spacing-10) var(--spacing-5)}.global-wrapper[data-is-root-path=true] .bio{margin-bottom:var(--spacing-20)}.global-header{align-items:center;display:flex;justify-content:space-between;margin-bottom:var(--spacing-12)}.main-heading{font-size:var(--fontSize-7);margin:0}.post-list-item{margin-bottom:var(--spacing-8);margin-top:var(--spacing-8)}.post-list-item p{margin-bottom:var(--spacing-0)}.post-list-item h2{color:var(--color-primary);font-size:var(--fontSize-4);margin-bottom:var(--spacing-2);margin-top:var(--spacing-0)}.post-list-item header{margin-bottom:var(--spacing-4)}.header-link-home{font-family:var(--font-heading);font-size:var(--fontSize-2);font-weight:var(--fontWeight-bold);text-decoration:none}.bio{display:flex;margin-bottom:var(--spacing-16)}.bio p{margin-bottom:var(--spacing-0)}.github-avatar{margin-top:4px;opacity:.3}.blog-post header h1{margin:var(--spacing-0) var(--spacing-0) var(--spacing-4) var(--spacing-0)}.blog-post header p{font-family:var(--font-heading);font-size:var(--fontSize-2)}.blog-post-nav ul{margin:var(--spacing-0)}.gatsby-highlight{margin-bottom:var(--spacing-8)}@media (max-width:42rem){blockquote{padding:var(--spacing-0) var(--spacing-0) var(--spacing-0) var(--spacing-4)}blockquote,ol,ul{margin-left:var(--spacing-0)}ol,ul{list-style-position:inside}}code[class*=language-],pre[class*=language-]{word-wrap:normal;background:none;color:#000;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;-webkit-hyphens:none;hyphens:none;line-height:1.5;-o-tab-size:4;tab-size:4;text-align:left;text-shadow:0 1px #fff;white-space:pre;word-break:normal;word-spacing:normal}code[class*=language-]::selection,code[class*=language-] ::selection,pre[class*=language-]::selection,pre[class*=language-] ::selection{background:#b3d4fc;text-shadow:none}@media print{code[class*=language-],pre[class*=language-]{text-shadow:none}}pre[class*=language-]{margin:.5em 0;overflow:auto;padding:1em}:not(pre)>code[class*=language-],pre[class*=language-]{background:#f5f2f0}:not(pre)>code[class*=language-]{border-radius:.3em;padding:.1em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#708090}.token.punctuation{color:#999}.token.namespace{opacity:.7}.token.boolean,.token.constant,.token.deleted,.token.number,.token.property,.token.symbol,.token.tag{color:#905}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#690}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url{background:hsla(0,0%,100%,.5);color:#9a6e3a}.token.atrule,.token.attr-value,.token.keyword{color:#07a}.token.class-name,.token.function{color:#dd4a68}.token.important,.token.regex,.token.variable{color:#e90}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}</style><meta name="generator" content="Gatsby 3.14.1"/><style>.gatsby-image-wrapper{position:relative;overflow:hidden}.gatsby-image-wrapper img{bottom:0;height:100%;left:0;margin:0;max-width:none;padding:0;position:absolute;right:0;top:0;width:100%;object-fit:cover}.gatsby-image-wrapper [data-main-image]{opacity:0;transform:translateZ(0);transition:opacity .25s linear;will-change:opacity}.gatsby-image-wrapper-constrained{display:inline-block;vertical-align:top}</style><noscript><style>.gatsby-image-wrapper noscript [data-main-image]{opacity:1!important}.gatsby-image-wrapper [data-placeholder-image]{opacity:0!important}</style></noscript><script type="module">const e="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;e&&document.body.addEventListener("load",(function(e){if(void 0===e.target.dataset.mainImage)return;if(void 0===e.target.dataset.gatsbyImageSsr)return;const t=e.target;let a=null,n=t;for(;null===a&&n;)void 0!==n.parentNode.dataset.gatsbyImageWrapper&&(a=n.parentNode),n=n.parentNode;const o=a.querySelector("[data-placeholder-image]"),r=new Image;r.src=t.currentSrc,r.decode().catch((()=>{})).then((()=>{t.style.opacity=1,o&&(o.style.opacity=0,o.style.transition="opacity 500ms linear")}))}),!0);</script><style type="text/css">
    .anchor.before {
      position: absolute;
      top: 0;
      left: 0;
      transform: translateX(-100%);
      padding-right: 4px;
    }
    .anchor.after {
      display: inline-block;
      padding-left: 4px;
    }
    h1 .anchor svg,
    h2 .anchor svg,
    h3 .anchor svg,
    h4 .anchor svg,
    h5 .anchor svg,
    h6 .anchor svg {
      visibility: hidden;
    }
    h1:hover .anchor svg,
    h2:hover .anchor svg,
    h3:hover .anchor svg,
    h4:hover .anchor svg,
    h5:hover .anchor svg,
    h6:hover .anchor svg,
    h1 .anchor:focus svg,
    h2 .anchor:focus svg,
    h3 .anchor:focus svg,
    h4 .anchor:focus svg,
    h5 .anchor:focus svg,
    h6 .anchor:focus svg {
      visibility: visible;
    }
  </style><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop
          var clientTop = document.documentElement.clientTop || document.body.clientTop || 0
          var offset = element.getBoundingClientRect().top + scrollTop - clientTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 0)
          }), 0)
        }
      }
    })
  </script><link rel="alternate" type="application/rss+xml" href="/rss.xml"/><link rel="icon" href="/favicon-32x32.png?v=908a5a64b46caffbffe9c861d065f8c7" type="image/png"/><link rel="manifest" href="/manifest.webmanifest" crossorigin="anonymous"/><meta name="theme-color" content="#663399"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=908a5a64b46caffbffe9c861d065f8c7"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=908a5a64b46caffbffe9c861d065f8c7"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=908a5a64b46caffbffe9c861d065f8c7"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=908a5a64b46caffbffe9c861d065f8c7"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=908a5a64b46caffbffe9c861d065f8c7"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=908a5a64b46caffbffe9c861d065f8c7"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=908a5a64b46caffbffe9c861d065f8c7"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=908a5a64b46caffbffe9c861d065f8c7"/><title data-react-helmet="true">Multi threading in node-js | cccv blog</title><meta data-react-helmet="true" name="description" content="Recently I happened to write some nodejs scripts to do some simple static analysis with babel.
But the program took quite some time to finish. Time for…"/><meta data-react-helmet="true" property="og:title" content="Multi threading in node-js"/><meta data-react-helmet="true" property="og:description" content="Recently I happened to write some nodejs scripts to do some simple static analysis with babel.
But the program took quite some time to finish. Time for…"/><meta data-react-helmet="true" property="og:type" content="website"/><link as="script" rel="preload" href="/webpack-runtime-592fd6b2d972df9b3813.js"/><link as="script" rel="preload" href="/framework-f51011608d8c295be2df.js"/><link as="script" rel="preload" href="/app-caa7e57b2653a0e1eb9d.js"/><link as="script" rel="preload" href="/commons-8f342ddacb20dd983927.js"/><link as="script" rel="preload" href="/component---src-templates-blog-post-js-e10a9f2800f6ab87c456.js"/><link as="fetch" rel="preload" href="/page-data/2022-06-25-multi-threading-in-node-js/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/1776624730.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/3000541721.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/3274528899.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div class="global-wrapper" data-is-root-path="false"><header class="global-header"><a class="header-link-home" href="/">cccv blog</a><a href="https://github.com/chauchakching"><div data-gatsby-image-wrapper="" class="gatsby-image-wrapper gatsby-image-wrapper-constrained github-avatar"><div style="max-width:34px;display:block"><img alt="" role="presentation" aria-hidden="true" src="data:image/svg+xml;charset=utf-8,%3Csvg height=&#x27;34&#x27; width=&#x27;34&#x27; xmlns=&#x27;http://www.w3.org/2000/svg&#x27; version=&#x27;1.1&#x27;%3E%3C/svg%3E" style="max-width:100%;display:block;position:static"/></div><div aria-hidden="true" data-placeholder-image="" style="opacity:1;transition:opacity 500ms linear;background-color:#080808;position:absolute;top:0;left:0;bottom:0;right:0"></div><picture><source type="image/avif" data-srcset="/static/ef7a02b69836dc8b6a732a54c4200dcb/faabf/GitHub-Mark-120px-plus.avif 9w,/static/ef7a02b69836dc8b6a732a54c4200dcb/5b559/GitHub-Mark-120px-plus.avif 17w,/static/ef7a02b69836dc8b6a732a54c4200dcb/ac3e3/GitHub-Mark-120px-plus.avif 34w,/static/ef7a02b69836dc8b6a732a54c4200dcb/8d05f/GitHub-Mark-120px-plus.avif 68w" sizes="(min-width: 34px) 34px, 100vw"/><source type="image/webp" data-srcset="/static/ef7a02b69836dc8b6a732a54c4200dcb/a8d60/GitHub-Mark-120px-plus.webp 9w,/static/ef7a02b69836dc8b6a732a54c4200dcb/07b39/GitHub-Mark-120px-plus.webp 17w,/static/ef7a02b69836dc8b6a732a54c4200dcb/8fcc8/GitHub-Mark-120px-plus.webp 34w,/static/ef7a02b69836dc8b6a732a54c4200dcb/3c535/GitHub-Mark-120px-plus.webp 68w" sizes="(min-width: 34px) 34px, 100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="opacity:0" sizes="(min-width: 34px) 34px, 100vw" decoding="async" loading="lazy" data-src="/static/ef7a02b69836dc8b6a732a54c4200dcb/9fc66/GitHub-Mark-120px-plus.png" data-srcset="/static/ef7a02b69836dc8b6a732a54c4200dcb/abaea/GitHub-Mark-120px-plus.png 9w,/static/ef7a02b69836dc8b6a732a54c4200dcb/d139f/GitHub-Mark-120px-plus.png 17w,/static/ef7a02b69836dc8b6a732a54c4200dcb/9fc66/GitHub-Mark-120px-plus.png 34w,/static/ef7a02b69836dc8b6a732a54c4200dcb/45f07/GitHub-Mark-120px-plus.png 68w" alt="github"/></picture><noscript><picture><source type="image/avif" srcSet="/static/ef7a02b69836dc8b6a732a54c4200dcb/faabf/GitHub-Mark-120px-plus.avif 9w,/static/ef7a02b69836dc8b6a732a54c4200dcb/5b559/GitHub-Mark-120px-plus.avif 17w,/static/ef7a02b69836dc8b6a732a54c4200dcb/ac3e3/GitHub-Mark-120px-plus.avif 34w,/static/ef7a02b69836dc8b6a732a54c4200dcb/8d05f/GitHub-Mark-120px-plus.avif 68w" sizes="(min-width: 34px) 34px, 100vw"/><source type="image/webp" srcSet="/static/ef7a02b69836dc8b6a732a54c4200dcb/a8d60/GitHub-Mark-120px-plus.webp 9w,/static/ef7a02b69836dc8b6a732a54c4200dcb/07b39/GitHub-Mark-120px-plus.webp 17w,/static/ef7a02b69836dc8b6a732a54c4200dcb/8fcc8/GitHub-Mark-120px-plus.webp 34w,/static/ef7a02b69836dc8b6a732a54c4200dcb/3c535/GitHub-Mark-120px-plus.webp 68w" sizes="(min-width: 34px) 34px, 100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="opacity:0" sizes="(min-width: 34px) 34px, 100vw" decoding="async" loading="lazy" src="/static/ef7a02b69836dc8b6a732a54c4200dcb/9fc66/GitHub-Mark-120px-plus.png" srcSet="/static/ef7a02b69836dc8b6a732a54c4200dcb/abaea/GitHub-Mark-120px-plus.png 9w,/static/ef7a02b69836dc8b6a732a54c4200dcb/d139f/GitHub-Mark-120px-plus.png 17w,/static/ef7a02b69836dc8b6a732a54c4200dcb/9fc66/GitHub-Mark-120px-plus.png 34w,/static/ef7a02b69836dc8b6a732a54c4200dcb/45f07/GitHub-Mark-120px-plus.png 68w" alt="github"/></picture></noscript><script type="module">const t="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;if(t){const t=document.querySelectorAll("img[data-main-image]");for(let e of t){e.dataset.src&&(e.setAttribute("src",e.dataset.src),e.removeAttribute("data-src")),e.dataset.srcset&&(e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset"));const t=e.parentNode.querySelectorAll("source[data-srcset]");for(let e of t)e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset");e.complete&&(e.style.opacity=1)}}</script></div></a></header><main><article class="blog-post" itemscope="" itemType="http://schema.org/Article"><header><h1 itemProp="headline">Multi threading in node-js</h1><p>June 25, 2022</p></header><section itemProp="articleBody"><p>Recently I happened to write some nodejs scripts to do some simple static analysis with babel.
But the program took quite some time to finish. Time for optimization.</p>
<p>We always say “nodejs is single-threaded”. And we seldom use nodejs to run code with multithreading (maybe it’s just me).
Indeed nodejs multithreading support have been here for a while! Let’s try to make use of the threads to distribute the loads.</p>
<p>As early as node <code class="language-text">v10.5.0</code> (2018), the experimental feature <code class="language-text">Worker</code> constructor was introduced for spawning workers to utilize the other cores of cpu.
However the interface of it had been changing until <code class="language-text">v12.17.0</code> (2020). (<a href="https://developer.mozilla.org/en-US/docs/Web/API/Worker/Worker">mdn</a>)</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/e21c0ea67b5d9ad852af546e88d3cd44/b2b2c/worker-constructor-nodejs-mdn.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 86.70886075949367%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAABYlAAAWJQFJUiTwAAABmUlEQVQ4y61Ti27CMAzs/38lEmi06Stpm+YB9KYzuCsMEJNmyYrrxBdffC0ulwuWZRFnfDqdZM05I4Qg8fl8XvcYxxhlnzFzjJ1zcqYgkNoWmNb3vRTQ5nlGWZboug4pJQExxqBpmrvaQos1wa705qqqpBsaOzgej5Jr21Yu4zdBabyENcWWMo0H6rqWlYXWWfnWHFeCsVN2fCxLjOOItmkwe4/ika61Fh076Ho4a+Enj2EYrrm+l30CcCX44AZY62Bai9FHFIf9HrvdTmgSMKaEmBNCiuJzCoi3mJ5yQspZfI4BIQUMMeNQ92jciIK382YBvCwC5uMsTrAx+itYvgGe8uo+XQFdiPgyFeq2+aFM46OOg8PgzDqMvxjHsA5F33GaJlTGyDRVMvq+W1mpP+Z/6ZCA1JbKgw/PWKes061vE9czXF8CstDculT5fEZ5uQckRed6hNlik35K+9GfAmqHZVkJLapf32oL+qyzt4B1bda321L+GFATSnkam7Wrf6Jcyo9PLVLw9I+H8qgl773I5h3lV07ZfAO9HS/WevasFgAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="worker-constructor-nodejs-mdn"
        title="worker-constructor-nodejs-mdn"
        src="/static/e21c0ea67b5d9ad852af546e88d3cd44/f058b/worker-constructor-nodejs-mdn.png"
        srcset="/static/e21c0ea67b5d9ad852af546e88d3cd44/c26ae/worker-constructor-nodejs-mdn.png 158w,
/static/e21c0ea67b5d9ad852af546e88d3cd44/6bdcf/worker-constructor-nodejs-mdn.png 315w,
/static/e21c0ea67b5d9ad852af546e88d3cd44/f058b/worker-constructor-nodejs-mdn.png 630w,
/static/e21c0ea67b5d9ad852af546e88d3cd44/40601/worker-constructor-nodejs-mdn.png 945w,
/static/e21c0ea67b5d9ad852af546e88d3cd44/78612/worker-constructor-nodejs-mdn.png 1260w,
/static/e21c0ea67b5d9ad852af546e88d3cd44/b2b2c/worker-constructor-nodejs-mdn.png 1708w"
        sizes="(max-width: 630px) 100vw, 630px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
  </a>
    </span></p>
<h2 id="nodejs-worker_threads-module" style="position:relative;"><a href="#nodejs-worker_threads-module" aria-label="nodejs worker_threads module permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Nodejs <code class="language-text">worker_threads</code> module</h2>
<p>This is an example of the main process spawning a worker.</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token comment">// index.ts</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Worker <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"worker_threads"</span>

<span class="token comment">// spawn a worker</span>
<span class="token keyword">const</span> worker <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Worker</span><span class="token punctuation">(</span><span class="token string">"./worker"</span><span class="token punctuation">)</span>

<span class="token comment">// send data to worker</span>
worker<span class="token punctuation">.</span><span class="token function">postMessage</span><span class="token punctuation">(</span><span class="token string">"some message from main thread"</span><span class="token punctuation">)</span>
worker<span class="token punctuation">.</span><span class="token function">postMessage</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">"john"</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
worker<span class="token punctuation">.</span><span class="token function">postMessage</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">"a"</span><span class="token punctuation">,</span> <span class="token string">"b"</span><span class="token punctuation">,</span> <span class="token string">"c"</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre></div>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token comment">// worker.ts</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> parentPort <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"worker_threads"</span>

parentPort<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">"message"</span><span class="token punctuation">,</span> value <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"worker received message:"</span><span class="token punctuation">,</span> value<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre></div>
<h3 id="what-kinds-of-data-can-we-send-to-workers" style="position:relative;"><a href="#what-kinds-of-data-can-we-send-to-workers" aria-label="what kinds of data can we send to workers permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>What kinds of data can we send to workers?</h3>
<p>Usually when doing multithreading, we have to be very careful in sharing data between threads.
Otherwise weird bugs and race condition would mess up your program.</p>
<p>So in nodejs, there is some restriction in what kinds of data can be sent to workers via <a href="https://nodejs.org/api/worker_threads.html#portpostmessagevalue-transferlist"><code class="language-text">postMessage</code></a>.
All values that are compatible with <a href="https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API/Structured_clone_algorithm">HTML structured clone algorithm</a> are allowed.
It includes a wide variety of complex objects, like <code class="language-text">Array</code>, <code class="language-text">Date</code>, <code class="language-text">Map</code>, <code class="language-text">Set</code>, objects with circular reference, etc.</p>
<p>While values like <strong>functions</strong>, DOM nodes and those “with context / metadata” are not supported, and would cause <code class="language-text">DataCloneError</code> exception.</p>
<h3 id="how-are-values-passed-down-to-workers" style="position:relative;"><a href="#how-are-values-passed-down-to-workers" aria-label="how are values passed down to workers permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>How are values passed down to workers?</h3>
<p>The values are cloned to the workers. So the workers can freely modify the values!</p>
<p>But there is an exception. <code class="language-text">postMessage</code> supports second function param <code class="language-text">transferList</code>. which
is a list only allows <code class="language-text">ArrayBuffer</code>, <code class="language-text">MessagePort</code> and <code class="language-text">FileHandle</code> values.
Once the message is sent, the listed values are not allowed to be used by the sending side.
It is for some special use, so we won’t go further.</p>
<h3 id="limitation-code-execution-isolation" style="position:relative;"><a href="#limitation-code-execution-isolation" aria-label="limitation code execution isolation permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Limitation: code execution isolation</h3>
<p>From the API design of <code class="language-text">worker_threads</code>, we can see that we can’t share scope of the main thread when execute code in worker.
If we want to pass data to workers, we have to do it explicitly, either with <code class="language-text">postMessage</code> or <code class="language-text">setEnvironmentData</code>.</p>
<p>We cannot have this kind of abstraction of multithreading:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token comment">// imaginary abstraction of defining multithreading jobs</span>
<span class="token keyword">const</span> results <span class="token operator">=</span> <span class="token keyword">await</span> superStream<span class="token punctuation">.</span><span class="token function">fromValues</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token operator">...</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">setMaxThreads</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">runInThreads</span><span class="token punctuation">(</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
            <span class="token comment">// expensiveComputation() is an ordinary function</span>
            <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token function">expensiveComputation</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span>
            <span class="token keyword">return</span> result
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'main thread got results from workers:'</span><span class="token punctuation">,</span> results<span class="token punctuation">)</span></code></pre></div>
<h2 id="threadsjs-library" style="position:relative;"><a href="#threadsjs-library" aria-label="threadsjs library permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code class="language-text">threads.js</code> library</h2>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/245b892e37a1600a8452fc6e9659f711/e7aec/threads-js-logo.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 13.924050632911392%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAhklEQVQI1y3OOw6BYRSE4b+1AYUd6EQhCk9EbMA1WnGJhpBQWIA9aNRWgAqdQisanaXIF2eamWROzrwZRiiigDlaqKGOCcrooRpewRQlDJFDPrpuhj3WUZywwxdnvHDFBwc8cMETR7zR8dcN9/RwEzQpN2K5HaSDyIvwFfrYoollosI47mc/Zk5DWo0y2YkAAAAASUVORK5CYII='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="threads.js"
        title="threads.js"
        src="/static/245b892e37a1600a8452fc6e9659f711/f058b/threads-js-logo.png"
        srcset="/static/245b892e37a1600a8452fc6e9659f711/c26ae/threads-js-logo.png 158w,
/static/245b892e37a1600a8452fc6e9659f711/6bdcf/threads-js-logo.png 315w,
/static/245b892e37a1600a8452fc6e9659f711/f058b/threads-js-logo.png 630w,
/static/245b892e37a1600a8452fc6e9659f711/40601/threads-js-logo.png 945w,
/static/245b892e37a1600a8452fc6e9659f711/78612/threads-js-logo.png 1260w,
/static/245b892e37a1600a8452fc6e9659f711/e7aec/threads-js-logo.png 1726w"
        sizes="(max-width: 630px) 100vw, 630px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
  </a>
    </span></p>
<p>The library <a href="https://github.com/andywer/threads.js/"><code class="language-text">threads.js</code></a>, created in 2019, provides a higher level abstraction for doing multithreading.
It also supports multi platforms of nodejs, browser and electron!</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token comment">// index.ts</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> spawn<span class="token punctuation">,</span> Thread<span class="token punctuation">,</span> Worker <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"threads"</span>

<span class="token keyword">const</span> worker <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">spawn</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Worker</span><span class="token punctuation">(</span><span class="token string">"./worker"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token keyword">await</span> worker<span class="token punctuation">.</span><span class="token function">fib</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>

<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"main thread got result from worker:"</span><span class="token punctuation">,</span> result<span class="token punctuation">)</span></code></pre></div>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token comment">// worker.ts</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> expose <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"threads/worker"</span>

<span class="token keyword">const</span> <span class="token function-variable function">fib</span> <span class="token operator">=</span> <span class="token punctuation">(</span>n<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span>n <span class="token operator">&lt;=</span> <span class="token number">1</span> <span class="token operator">?</span> <span class="token number">1</span> <span class="token operator">:</span> <span class="token function">fib</span><span class="token punctuation">(</span>n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">fib</span><span class="token punctuation">(</span>n <span class="token operator">-</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token function">expose</span><span class="token punctuation">(</span><span class="token punctuation">{</span> fib <span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre></div>
<h3 id="thread-pool" style="position:relative;"><a href="#thread-pool" aria-label="thread pool permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Thread pool</h3>
<p>Most likely you don’t want to create too many workers than the actual cpu cores you have,
otherwise the context switching overhead would reduce the overall performance.
You will need to maintain a pool of workers to do your jobs, which is what <code class="language-text">threads.js</code> supports!</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token comment">// index.ts</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> spawn<span class="token punctuation">,</span> Pool<span class="token punctuation">,</span> Worker <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"threads"</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> cpus <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'os'</span>

<span class="token keyword">const</span> computationParams <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token punctuation">]</span>
<span class="token keyword">let</span> results <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>

<span class="token keyword">const</span> poolSize <span class="token operator">=</span> <span class="token function">cpus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length
<span class="token keyword">const</span> pool <span class="token operator">=</span> <span class="token function">Pool</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">spawn</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Worker</span><span class="token punctuation">(</span><span class="token string">"./worker"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> poolSize<span class="token punctuation">)</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> param <span class="token keyword">of</span> computationParams<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    pool<span class="token punctuation">.</span><span class="token function">queue</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span>worker<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token keyword">await</span> worker<span class="token punctuation">.</span><span class="token function">expensiveComputation</span><span class="token punctuation">(</span>param<span class="token punctuation">)</span>
        results<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">await</span> pool<span class="token punctuation">.</span><span class="token function">completed</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">await</span> pool<span class="token punctuation">.</span><span class="token function">terminate</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'main thread got results from workers:'</span><span class="token punctuation">,</span> results<span class="token punctuation">)</span></code></pre></div>
<h2 id="conclusion" style="position:relative;"><a href="#conclusion" aria-label="conclusion permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Conclusion</h2>
<p>The basic use of worker is simple enough. As for my little nodejs program, the utilization of the extra cpu cores reduced the execution time from ~2mins to 38s. Sweet.</p></section><hr/><footer></footer></article><nav class="blog-post-nav"><ul style="display:flex;flex-wrap:wrap;justify-content:space-between;list-style:none;padding:0"><li><a rel="prev" href="/2021-10-02-switching-applications-with-keyboard-shortcut-on-macos/">← <!-- -->Switching applications with keyboard shortcut on macOS</a></li><li></li></ul></nav></main><footer>© <!-- -->2022<!-- -->, Built with<!-- --> <a href="https://www.gatsbyjs.com">Gatsby</a></footer></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/2022-06-25-multi-threading-in-node-js/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-da1383271c4628b9cd90.js"],"app":["/app-caa7e57b2653a0e1eb9d.js"],"component---src-pages-404-js":["/component---src-pages-404-js-0cd93f5e20c60492a7b4.js"],"component---src-pages-index-js":["/component---src-pages-index-js-2d6ea1159ecdc0262869.js"],"component---src-pages-using-typescript-tsx":["/component---src-pages-using-typescript-tsx-fc05c5a561ac121abfac.js"],"component---src-templates-blog-post-js":["/component---src-templates-blog-post-js-e10a9f2800f6ab87c456.js"]};/*]]>*/</script><script src="/polyfill-da1383271c4628b9cd90.js" nomodule=""></script><script src="/component---src-templates-blog-post-js-e10a9f2800f6ab87c456.js" async=""></script><script src="/commons-8f342ddacb20dd983927.js" async=""></script><script src="/app-caa7e57b2653a0e1eb9d.js" async=""></script><script src="/framework-f51011608d8c295be2df.js" async=""></script><script src="/webpack-runtime-592fd6b2d972df9b3813.js" async=""></script></body></html>